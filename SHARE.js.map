{"version":3,"sources":["../src/SHARE.js"],"names":["name","SHARE","shareObj","fn","obj","GOKU","Error","shareDataError","title","shareDesc","jumpUrl","iconBase64","icon","window","WinJSBridge","call","shareItems","shareTitle","content","url","location","href","thumbImage","thumbImageUrl","recipients","specialContent","code","res","response","resultCode","appError"],"mappings":"AAAA;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;;;;;;;;;;;;AAGA;;AACA;;AACA;;;;AACA;;;;;;AAEA,IAAIA,OAAO,OAAX;AACA,IAAIC,QAAQ,SAARA,KAAQ,CAACC,QAAD,EACN;AAAA,MADiBC,EACjB,uEADsB,aAAK,CAChC,CAAK;;AACJ,MAAIC,MAAM,EAAV;AACA,MAAI,CAACF,QAAL,EAAe;AACb,QAAIG,IAAJ,EAAU;AACR,UAAI,sBAAOA,KAAKH,QAAZ,MAAyB,QAA7B,EAAuC;AACrCE,cAAMC,KAAKH,QAAX;AACD,OAFD,MAEO;AACL,cAAM,IAAII,KAAJ,CAAUC,uBAAV,CAAN;AACD;AACF,KAND,MAMO;AACL,YAAM,IAAID,KAAJ,CAAUC,uBAAV,CAAN;AACD;AACF,GAVD,MAUO;AACLH,UAAMF,QAAN;AACD;AAdG,aAekDE,GAflD;AAAA,MAeGI,KAfH,QAeGA,KAfH;AAAA,MAeUC,SAfV,QAeUA,SAfV;AAAA,MAeqBC,OAfrB,QAeqBA,OAfrB;AAAA,MAe8BC,UAf9B,QAe8BA,UAf9B;AAAA,MAe0CC,IAf1C,QAe0CA,IAf1C;;AAgBJ,wBAAS,aAAK;AACZC,WAAOC,WAAP,CAAmBC,IAAnB,CAAwB,OAAxB,EAAiC,OAAjC,EAA0C;AACxCP,aAAOA,KADiC;AAExCQ,kBAAY,wBAAUZ,GAAV,EAAeY,UAFa;AAGxCC,kBAAY,KAH4B;AAIxCC,eAAST,SAJ+B;AAKxCU,WAAKT,WAAWU,SAASC,IALe;AAMxCC,kBAAYX,UAN4B;AAOxCY,qBAAeX,IAPyB;AAQxCY,kBAAY,EAR4B;AASxCC,sBAAgB,wBAAUrB,GAAV,EAAeqB;AATS,KAA1C,EAUG,eAAO;AAAA,UACDC,IADC,GACiBC,GADjB,CACDD,IADC;AAAA,UACKE,QADL,GACiBD,GADjB,CACKC,QADL;;AAER,UAAIF,QAAQ,CAAZ,EAAe;AACb,YAAIE,SAASC,UAAT,KAAwB,CAA5B,EAA+B;AAC7B,+BAAM,MAAN;AACA1B,aAAGyB,QAAH;AACD,SAHD,MAGO,IAAIA,SAASC,UAAT,KAAwB,CAA5B,EAA+B;AACpC,+BAAM,MAAN;AACD,SAFM,MAEA,IAAID,SAASC,UAAT,KAAwB,EAA5B,EAAgC;AACrC;AACD;AACF,OATD,MASO;AACL,cAAM,IAAIvB,KAAJ,OAAcN,IAAd,UAAuB8B,gBAAvB,CAAN;AACD;AACF,KAxBD;AAyBD,GA1BD;AA2BD,CA5CD;;kBA8Ce7B,K","file":"SHARE.js","sourcesContent":["'use strict';\n// app 点击按钮分享\n\n/**\n * shareData数据格式如下：\n *\n {\n   \"shareObj\": {\n     \"content\": [\n       {\n         \"channel\": \"WEIXIN_FRIEND\",\n         \"content\": \"微信好友文案\"\n       },\n       {\n         \"channel\": \"WEIXIN_FRIEND_CIRCLE\",\n         \"content\": \"朋友圈文案\"\n       },\n       {\n         \"channel\": \"QQ_FRIEND\",\n         \"content\": \"去\"\n       },\n       {\n         \"channel\": \"SMS\",\n         \"content\": \"短信文案\"\n       }\n     ],\n     \"icon\": \"http://192.168.2.112/fup/image/shareConfig/icon/201607/20160726112214.jpg\",\n     \"iconBase64\": \"\",\n     \"id\": 31,\n     \"operator\": 9999999,\n     \"shareDesc\": \"描述测试\",\n     \"title\": \"点点养车\"\n   }\n }\n */\n/**\n * todo SHARE\n */\nimport {appError, WinJSDec} from './APP/config';\nimport {shareType, shareDataError} from './share/config'\nimport SHARE_WEIXIN from './SHARE_WEIXIN';\nimport TOAST from './TOAST';\n\nvar name = 'SHARE';\nvar SHARE = (shareObj, fn = _ => {\n}) => {\n  let obj = {}\n  if (!shareObj) {\n    if (GOKU) {\n      if (typeof GOKU.shareObj === 'object') {\n        obj = GOKU.shareObj;\n      } else {\n        throw new Error(shareDataError)\n      }\n    } else {\n      throw new Error(shareDataError)\n    }\n  } else {\n    obj = shareObj;\n  }\n  const {title, shareDesc, jumpUrl, iconBase64, icon} = obj;\n  WinJSDec(_ => {\n    window.WinJSBridge.call('tools', 'share', {\n      title: title,\n      shareItems: shareType(obj).shareItems,\n      shareTitle: \"分享到\",\n      content: shareDesc,\n      url: jumpUrl || location.href,\n      thumbImage: iconBase64,\n      thumbImageUrl: icon,\n      recipients: '',\n      specialContent: shareType(obj).specialContent\n    }, res => {\n      const {code, response} = res;\n      if (code == 0) {\n        if (response.resultCode === 0) {\n          TOAST('分享成功');\n          fn(response);\n        } else if (response.resultCode === 1) {\n          TOAST('分享失败');\n        } else if (response.resultCode === 99) {\n          //TOAST('分享取消');\n        }\n      } else {\n        throw new Error(`[${name}] ${appError}`);\n      }\n    });\n  });\n};\n\nexport default SHARE;"]}